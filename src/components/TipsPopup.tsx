import { useState, useEffect } from 'react';
import { Card, CardContent } from './ui/card';
import { Button } from './ui/button';
import { Badge } from './ui/badge';
import { X, Lightbulb, ChevronRight } from 'lucide-react';
import { motion, AnimatePresence } from 'motion/react';

interface Tip {
  id: number;
  text: string;
  category: string;
  icon: string;
  language: {
    en: string;
    hi: string;
    ta: string;
    te: string;
    kn: string;
    ml: string;
  };
}

interface TipsPopupProps {
  selectedLanguage: string;
}

export function TipsPopup({ selectedLanguage }: TipsPopupProps) {
  const [currentTip, setCurrentTip] = useState(0);
  const [isVisible, setIsVisible] = useState(true);
  const [tipHistory, setTipHistory] = useState<number[]>([]);

  const farmingTips: Tip[] = [
    {
      id: 1,
      text: "Loamy soil is best for wheat, while sandy soil suits groundnut perfectly.",
      category: "Soil",
      icon: "ЁЯМ▒",
      language: {
        en: "Loamy soil is best for wheat, while sandy soil suits groundnut perfectly.",
        hi: "рдЧреЗрд╣реВрдВ рдХреЗ рд▓рд┐рдП рджреЛрдордЯ рдорд┐рдЯреНрдЯреА рд╕рдмрд╕реЗ рдЕрдЪреНрдЫреА рд╣реИ, рдЬрдмрдХрд┐ рд░реЗрддреАрд▓реА рдорд┐рдЯреНрдЯреА рдореВрдВрдЧрдлрд▓реА рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рд╣реИред",
        ta: "роХрпЛродрпБроорпИроХрпНроХрпБ роХро│ро┐роорогрпН роорогрпН роЪро┐ро▒роирпНродродрпБ, роорогро▓рпН роорогрпН роиро┐ро▓роХрпНроХроЯро▓рпИроХрпНроХрпБ роПро▒рпНро▒родрпБ.",
        te: "р░Чр▒Лр░зр▒Бр░ор░▓р░Хр▒Б р░▓р▒Лр░ор▒А р░ор░Яр▒Нр░Яр░┐ р░Йр░др▒Нр░др░ор░В, р░Зр░╕р▒Бр░Х р░ор░Яр▒Нр░Яр░┐ р░╡р▒Зр░░р▒Бр░╢р▒Жр░ир░Чр░Хр▒Б р░Ер░ир▒Бр░Хр▒Вр░▓р░В.",
        kn: "р▓Чр│Лр▓зр▓┐р▓Чр│Ж р▓ор│Жр▓Хр│Нр▓Хр│Ж р▓ор▓гр│Нр▓гр│Б р▓Йр▓др│Нр▓др▓о, р▓ор▓░р▓│р│Б р▓ор▓гр│Нр▓гр│Б р▓Хр▓бр▓▓р│Жр▓Хр▓╛р▓пр▓┐р▓Чр│Ж р▓╕р│Вр▓Хр│Нр▓д.",
        ml: "р┤Чр╡Лр┤др┤ор╡Нр┤кр┤┐р┤ир╡Н р┤Хр┤│р┤┐р┤ор┤гр╡Нр┤гр╡Н р┤ир┤▓р╡Нр┤▓р┤др╡Н, р┤ор┤гр╡╜ р┤ор┤гр╡Нр┤гр╡Н р┤ир┤┐р┤▓р┤Хр╡Нр┤Хр┤Яр┤▓р┤пр╡Нр┤Хр╡Нр┤Хр╡Н р┤Ер┤ир╡Бр┤пр╡Лр┤Ьр╡Нр┤пр┤В."
      }
    },
    {
      id: 2,
      text: "Save water with drip irrigation - earn +50 sustainability points!",
      category: "Water",
      icon: "ЁЯТз",
      language: {
        en: "Save water with drip irrigation - earn +50 sustainability points!",
        hi: "рдбреНрд░рд┐рдк рд╕рд┐рдВрдЪрд╛рдИ рд╕реЗ рдкрд╛рдиреА рдмрдЪрд╛рдПрдВ - +50 рд╕реНрдерд┐рд░рддрд╛ рдЕрдВрдХ рдЕрд░реНрдЬрд┐рдд рдХрд░реЗрдВ!",
        ta: "родрпБро│ро┐ роирпАро░рпНрокрпНрокро╛роЪройродрпНродро╛ро▓рпН родрогрпНрогрпАро░рпН рооро┐роЪрпНроЪрокрпНрокроЯрпБродрпНродрпБроЩрпНроХро│рпН - +50 роиро┐ро▓рпИропро╛рой рокрпБро│рпНро│ро┐роХро│рпН!",
        te: "р░бр▒Нр░░р░┐р░кр▒Н р░Зр░░р░┐р░Чр▒Зр░╖р░ир▒НтАМр░др▒Л р░ир▒Ар░░р▒Б р░Жр░жр░╛ р░Ър▒Зр░пр░Вр░бр░┐ - +50 р░╕р▒Нр░ер░┐р░░р░др▒Нр░╡ р░кр░╛р░пр░┐р░Вр░Яр▒Нр░▓р▒Б!",
        kn: "р▓бр│Нр▓░р▓┐р▓кр│Н р▓ир│Ар▓░р▓╛р▓╡р▓░р▓┐р▓пр▓┐р▓Вр▓ж р▓ир│Ар▓░р│Б р▓Йр▓│р▓┐р▓╕р▓┐ - +50 р▓╕р▓ор▓░р│Нр▓ер▓др│Ж р▓Ер▓Вр▓Хр▓Чр▓│р│Б!",
        ml: "р┤бр╡Нр┤░р┤┐р┤кр╡Нр┤кр╡Н р┤Ьр┤▓р┤╕р╡Зр┤Ър┤ир┤др╡Нр┤др┤┐р╡╜ р┤╡р╡Жр┤│р╡Нр┤│р┤В р┤▓р┤╛р┤нр┤┐р┤Хр╡Нр┤Хр╡В - +50 р┤╕р╡Бр┤╕р╡Нр┤ер┤┐р┤░р┤д р┤кр╡Лр┤пр┤┐р┤ир╡Нр┤▒р╡Бр┤Хр╡╛!"
      }
    },
    {
      id: 3,
      text: "Plant marigold near tomatoes to reduce pests naturally.",
      category: "Pest Control",
      icon: "ЁЯРЮ",
      language: {
        en: "Plant marigold near tomatoes to reduce pests naturally.",
        hi: "рдЯрдорд╛рдЯрд░ рдХреЗ рдкрд╛рд╕ рдЧреЗрдВрджрд╛ рд▓рдЧрд╛рдПрдВ - рдкреНрд░рд╛рдХреГрддрд┐рдХ рдХреАрдЯ рдирд┐рдпрдВрддреНрд░рдг рдХреЗ рд▓рд┐рдПред",
        ta: "родроХрпНроХро╛ро│ро┐роХрпНроХрпБ роЕро░рпБроХро┐ро▓рпН роЪрпЖроорпНрокро░рпБродрпНродро┐ роироЯро╡рпБ - роЗропро▒рпНроХрпИ рокрпВроЪрпНроЪро┐ роХроЯрпНроЯрпБрокрпНрокро╛роЯрпБ.",
        te: "р░Яр░ор▒Лр░Яр░╛р░▓ р░жр░Чр▒Нр░Чр░░ р░мр░Вр░др░┐р░кр▒Бр░╡р▒Нр░╡р▒Б р░ир░╛р░Яр░Вр░бр░┐ - р░╕р░╣р░Ь р░Хр▒Ар░Я р░ир░┐р░пр░Вр░др▒Нр░░р░г.",
        kn: "р▓Яр│Кр▓ор│Зр▓Яр│К р▓мр▓│р▓┐ р▓ор▓╛р▓░р▓┐р▓Чр│Лр▓▓р│Нр▓бр│Н р▓ир▓╛р▓Яр▓┐ - р▓ир│Ир▓╕р▓░р│Нр▓Чр▓┐р▓Х р▓Хр│Ар▓Я р▓ир▓┐р▓пр▓Вр▓др│Нр▓░р▓г.",
        ml: "р┤др┤Хр╡Нр┤Хр┤╛р┤│р┤┐р┤пр╡Бр┤Яр╡Ж р┤Ер┤Яр╡Бр┤др╡Нр┤др╡Н р┤Ър╡Жр┤ир╡Нр┤др╡Бр┤ор┤▓р╡Нр┤▓р┤┐ р┤ир┤Яр┤╛р╡╗ - р┤кр╡Нр┤░р┤Хр╡Гр┤др┤┐р┤жр┤др╡Нр┤д р┤Хр╡Ар┤Я р┤ир┤┐р┤пр┤ир╡Нр┤др╡Нр┤░р┤гр┤В."
      }
    },
    {
      id: 4,
      text: "Cow dung compost improves soil fertility and adds yield bonus.",
      category: "Organic",
      icon: "ЁЯРД",
      language: {
        en: "Cow dung compost improves soil fertility and adds yield bonus.",
        hi: "рдЧреЛрдмрд░ рдХреА рдЦрд╛рдж рдорд┐рдЯреНрдЯреА рдХреА рдЙрд░реНрд╡рд░рддрд╛ рдмрдврд╝рд╛рддреА рд╣реИ рдФрд░ рдлрд╕рд▓ рдмреЛрдирд╕ рджреЗрддреА рд╣реИред",
        ta: "рооро╛роЯрпНроЯрпБ роЪро╛рогроорпН роорогрпН ро╡ро│родрпНродрпИ роЕродро┐роХро░ро┐роХрпНроХрпБроорпН рооро▒рпНро▒рпБроорпН ро╡ро┐ро│рпИроЪрпНроЪро▓рпН рокрпЛройро╕рпН родро░рпБроорпН.",
        te: "р░Жр░╡р▒Б р░кр▒Зр░б р░Хр░Вр░кр▒Лр░╕р▒Нр░Яр▒Н р░ор░Яр▒Нр░Яр░┐ р░╕р░╛р░░р░╡р░Вр░др░д р░кр▒Жр░Вр░Ър▒Бр░др▒Бр░Вр░жр░┐ р░ор░░р░┐р░пр▒Б р░жр░┐р░Чр▒Бр░мр░бр░┐ р░мр▒Лр░ир░╕р▒Н р░Зр░╕р▒Нр░др▒Бр░Вр░жр░┐.",
        kn: "р▓╣р▓╕р│Бр▓╡р▓┐р▓и р▓╕р▓Чр▓гр▓┐ р▓Хр▓Вр▓кр│Лр▓╕р│Нр▓Яр│Н р▓ор▓гр│Нр▓гр▓┐р▓и р▓лр▓▓р▓╡р▓др│Нр▓др▓др│Ж р▓╣р│Жр▓Ър│Нр▓Ър▓┐р▓╕р│Бр▓др│Нр▓др▓жр│Ж.",
        ml: "р┤кр┤╢р╡Бр┤╡р┤┐р╡╗ р┤Ър┤╛р┤гр┤Хр┤В р┤ор┤гр╡Нр┤гр┤┐р┤ир╡Нр┤▒р╡Ж р┤лр┤▓р┤нр╡Вр┤пр┤┐р┤╖р╡Нр┤ар┤д р┤╡р╡╝р┤зр┤┐р┤кр╡Нр┤кр┤┐р┤Хр╡Нр┤Хр╡Бр┤ир╡Нр┤ир╡Б."
      }
    },
    {
      id: 5,
      text: "Best time to sow paddy is just after the first monsoon rains.",
      category: "Timing",
      icon: "ЁЯМдя╕П",
      language: {
        en: "Best time to sow paddy is just after the first monsoon rains.",
        hi: "рдзрд╛рди рдмреЛрдиреЗ рдХрд╛ рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рд╕рдордп рдкрд╣рд▓реА рдорд╛рдирд╕реВрдиреА рдмрд╛рд░рд┐рд╢ рдХреЗ рддреБрд░рдВрдд рдмрд╛рдж рд╣реИред",
        ta: "роирпЖро▓рпН ро╡ро┐родрпИрокрпНрокродро▒рпНроХро╛рой роЪро┐ро▒роирпНрод роирпЗро░роорпН роорпБродро▓рпН рокро░рпБро╡рооро┤рпИроХрпНроХрпБрокрпН рокро┐ро▒роХрпБ.",
        te: "р░╡р░░р░┐ р░╡р░┐р░др▒Нр░др░бр░╛р░ир░┐р░Хр░┐ р░ор░Вр░Ър░┐ р░╕р░ор░пр░В р░ор▒Кр░жр░Яр░┐ р░╡р░░р▒Нр░╖р░╛р░▓ р░др░░р▒Нр░╡р░╛р░д.",
        kn: "р▓нр▓др│Нр▓д р▓мр▓┐р▓др│Нр▓др▓▓р│Б р▓ор│Кр▓жр▓▓ р▓ор▓│р│Жр▓п р▓ир▓Вр▓др▓░ р▓Йр▓др│Нр▓др▓о р▓╕р▓ор▓п.",
        ml: "р┤ир╡Жр┤▓р╡Нр┤▓р╡Н р┤╡р┤┐р┤др╡Нр┤др┤┐р┤ир╡Н р┤Жр┤жр╡Нр┤п р┤ор┤┤р┤пр╡Нр┤Хр╡Нр┤Хр╡Н р┤╢р╡Зр┤╖р┤В р┤ор┤┐р┤Хр┤Ър╡Нр┤Ъ р┤╕р┤ор┤пр┤В."
      }
    },
    {
      id: 6,
      text: "Rotate crops to break pest cycles and improve soil health.",
      category: "Rotation",
      icon: "ЁЯФД",
      language: {
        en: "Rotate crops to break pest cycles and improve soil health.",
        hi: "рдХреАрдЯ рдЪрдХреНрд░ рддреЛрдбрд╝рдиреЗ рдФрд░ рдорд┐рдЯреНрдЯреА рд╕реНрд╡рд╛рд╕реНрдереНрдп рдореЗрдВ рд╕реБрдзрд╛рд░ рдХреЗ рд▓рд┐рдП рдлрд╕рд▓ рдЪрдХреНрд░ рдЕрдкрдирд╛рдПрдВред",
        ta: "рокрпВроЪрпНроЪро┐ роЪрпБро┤ро▒рпНроЪро┐ропрпИ роорпБро▒ро┐ропроЯро┐роХрпНроХ рооро▒рпНро▒рпБроорпН роорогрпН роЖро░рпЛроХрпНропродрпНродрпИ роорпЗроорпНрокроЯрпБродрпНрод рокропро┐ро░рпН роЪрпБро┤ро▒рпНроЪро┐ роЪрпЖропрпНропрпБроЩрпНроХро│рпН.",
        te: "р░Хр▒Ар░Я р░Ър░Хр▒Нр░░р░╛р░▓р░ир▒Б р░╡р░┐р░Ър▒Нр░Ыр░┐р░ир▒Нр░ир░В р░Ър▒Зр░пр░бр░╛р░ир░┐р░Хр░┐ р░ор░░р░┐р░пр▒Б р░ор░Яр▒Нр░Яр░┐ р░Жр░░р▒Лр░Чр▒Нр░пр░╛р░ир▒Нр░ир░┐ р░ор▒Жр░░р▒Бр░Чр▒Бр░кр░░р░Ър░бр░╛р░ир░┐р░Хр░┐ р░кр░Вр░Я р░ор░╛р░░р▒Нр░кр░┐р░бр░┐ р░Ър▒Зр░пр░Вр░бр░┐.",
        kn: "р▓Хр│Ар▓Я р▓Ър▓Хр│Нр▓░р▓Чр▓│р▓ир│Нр▓ир│Б р▓ор│Бр▓░р▓┐р▓пр▓▓р│Б р▓ор▓др│Нр▓др│Б р▓ор▓гр│Нр▓гр▓┐р▓и р▓Жр▓░р│Лр▓Чр│Нр▓п р▓╕р│Бр▓зр▓╛р▓░р▓┐р▓╕р▓▓р│Б р▓мр│Жр▓│р│Ж р▓╕р▓░р▓жр▓┐ р▓ор▓╛р▓бр▓┐.",
        ml: "р┤Хр╡Ар┤Я р┤Ър┤Хр╡Нр┤░р┤Щр╡Нр┤Щр╡╛ р┤др┤Хр╡╝р┤Хр╡Нр┤Хр┤╛р╡╗ р┤╡р┤┐р┤│ р┤нр╡Нр┤░р┤ор┤гр┤В р┤Ър╡Жр┤пр╡Нр┤пр╡Бр┤Х."
      }
    },
    {
      id: 7,
      text: "Mulching retains soil moisture and reduces weed growth by 70%.",
      category: "Soil Care",
      icon: "ЁЯМ┐",
      language: {
        en: "Mulching retains soil moisture and reduces weed growth by 70%.",
        hi: "рдорд▓реНрдЪрд┐рдВрдЧ рдорд┐рдЯреНрдЯреА рдХреА рдирдореА рдмрдирд╛рдП рд░рдЦрддреА рд╣реИ рдФрд░ рдЦрд░рдкрддрд╡рд╛рд░ рдХреЛ 70% рддрдХ рдХрдо рдХрд░рддреА рд╣реИред",
        ta: "роорогрпН рокрпКродрпНродро▓рпН роорогрпНрогро┐ройрпН роИро░рокрпНрокродродрпНродрпИ рокро░ро╛рооро░ро┐роХрпНроХрпБроорпН рооро▒рпНро▒рпБроорпН роХро│рпИ ро╡ро│ро░рпНроЪрпНроЪро┐ропрпИ 70% роХрпБро▒рпИроХрпНроХрпБроорпН.",
        te: "р░ор░▓р▒Нр░Ър░┐р░Вр░Чр▒Н р░ор░Яр▒Нр░Яр░┐р░▓р▒Л р░др▒Зр░ор░ир▒Б р░ир░┐р░▓р▒Бр░кр▒Бр░Хр▒Бр░Вр░Яр▒Бр░Вр░жр░┐ р░ор░░р░┐р░пр▒Б р░Хр▒Бр░Вр░Хр▒Бр░бр▒Б р░кр▒Жр░░р▒Бр░Чр▒Бр░жр░▓р░ир▒Б 70% р░др░Чр▒Нр░Чр░┐р░╕р▒Нр░др▒Бр░Вр░жр░┐.",
        kn: "р▓ор▓▓р│Нр▓Ър▓┐р▓Вр▓Чр│Н р▓ор▓гр│Нр▓гр▓┐р▓и р▓др│Зр▓╡р▓╛р▓Вр▓╢р▓╡р▓ир│Нр▓ир│Б р▓Йр▓│р▓┐р▓╕р│Бр▓др│Нр▓др▓жр│Ж р▓ор▓др│Нр▓др│Б 70% р▓Хр▓│р│Ж р▓мр│Жр▓│р▓╡р▓гр▓┐р▓Чр│Жр▓пр▓ир│Нр▓ир│Б р▓Хр▓бр▓┐р▓ор│Ж р▓ор▓╛р▓бр│Бр▓др│Нр▓др▓жр│Ж.",
        ml: "р┤ор╡╛р┤Ър╡Нр┤Ър┤┐р┤Вр┤Чр╡Н р┤ор┤гр╡Нр┤гр┤┐р┤ир╡Нр┤▒р╡Ж р┤Ир╡╝р┤кр╡Нр┤кр┤В р┤ир┤┐р┤▓р┤ир┤┐р╡╝р┤др╡Нр┤др╡Бр┤Хр┤пр╡Бр┤В р┤Хр┤│р┤Хр┤│р╡Бр┤Яр╡Ж р┤╡р┤│р╡╝р┤Ър╡Нр┤Ъ 70% р┤Хр╡Бр┤▒р┤пр╡Нр┤Хр╡Нр┤Хр╡Бр┤Хр┤пр╡Бр┤В р┤Ър╡Жр┤пр╡Нр┤пр╡Бр┤ир╡Нр┤ир╡Б."
      }
    },
    {
      id: 8,
      text: "Neem oil is a natural pesticide that protects crops without harming beneficial insects.",
      category: "Natural Pest Control",
      icon: "ЁЯМ│",
      language: {
        en: "Neem oil is a natural pesticide that protects crops without harming beneficial insects.",
        hi: "рдиреАрдо рдХрд╛ рддреЗрд▓ рдПрдХ рдкреНрд░рд╛рдХреГрддрд┐рдХ рдХреАрдЯрдирд╛рд╢рдХ рд╣реИ рдЬреЛ рдлрд╛рдпрджреЗрдордВрдж рдХреАрдбрд╝реЛрдВ рдХреЛ рдиреБрдХрд╕рд╛рди рдкрд╣реБрдВрдЪрд╛рдП рдмрд┐рдирд╛ рдлрд╕рд▓реЛрдВ рдХреА рд░рдХреНрд╖рд╛ рдХрд░рддрд╛ рд╣реИред",
        ta: "ро╡рпЗрокрпНрок роОрогрпНрогрпЖропрпН роТро░рпБ роЗропро▒рпНроХрпИ рокрпВроЪрпНроЪро┐роХрпНроХрпКро▓рпНро▓ро┐, рокропройрпБро│рпНро│ рокрпВроЪрпНроЪро┐роХро│рпБроХрпНроХрпБ родрпАроЩрпНроХрпБ ро╡ро┐ро│рпИро╡ро┐роХрпНроХро╛рооро▓рпН рокропро┐ро░рпНроХро│рпИрокрпН рокро╛родрпБроХро╛роХрпНроХрпБроорпН.",
        te: "р░╡р▒Зр░к р░ир▒Вр░ир▒Ж р░Тр░Х р░╕р░╣р░Ь р░Хр▒Ар░Яр░ир░╛р░╢р░┐р░ир░┐, р░Зр░жр░┐ р░Йр░кр░пр▒Лр░Чр░Хр░░р░ор▒Ир░и р░Хр▒Ар░Яр░Хр░╛р░▓р░ир▒Б р░╣р░╛р░ир░┐ р░Ър▒Зр░пр░Хр▒Бр░Вр░бр░╛ р░кр░Вр░Яр░▓р░ир▒Б р░░р░Хр▒Нр░╖р░┐р░╕р▒Нр░др▒Бр░Вр░жр░┐.",
        kn: "р▓мр│Зр▓╡р▓┐р▓и р▓Ор▓гр│Нр▓гр│Ж р▓ир│Ир▓╕р▓░р│Нр▓Чр▓┐р▓Х р▓Хр│Ар▓Яр▓ир▓╛р▓╢р▓Х, р▓Йр▓кр▓пр│Лр▓Чр▓Хр▓░ р▓Хр│Ар▓Яр▓Чр▓│р▓┐р▓Чр│Ж р▓╣р▓╛р▓ир▓┐р▓пр▓╛р▓Чр▓жр│Ж р▓мр│Жр▓│р│Жр▓Чр▓│р▓ир│Нр▓ир│Б р▓░р▓Хр│Нр▓╖р▓┐р▓╕р│Бр▓др│Нр▓др▓жр│Ж.",
        ml: "р┤╡р╡Зр┤кр╡Нр┤кр╡Жр┤гр╡Нр┤г р┤кр╡Нр┤░р┤Хр╡Гр┤др┤┐р┤жр┤др╡Нр┤д р┤Хр╡Ар┤Яр┤ир┤╛р┤╢р┤┐р┤ир┤┐р┤пр┤╛р┤гр╡Н, р┤Йр┤кр┤Хр┤╛р┤░р┤кр╡Нр┤░р┤жр┤ор┤╛р┤п р┤кр╡Бр┤┤р╡Бр┤Хр╡Нр┤Хр╡╛р┤Хр╡Нр┤Хр╡Н р┤жр╡Лр┤╖р┤В р┤╡р┤░р╡Бр┤др╡Нр┤др┤╛р┤др╡Ж р┤╡р┤┐р┤│р┤Хр┤│р╡Ж р┤╕р┤Вр┤░р┤Хр╡Нр┤╖р┤┐р┤Хр╡Нр┤Хр╡Бр┤ир╡Нр┤ир╡Б."
      }
    }
  ];

  useEffect(() => {
    const interval = setInterval(() => {
      if (isVisible) {
        let nextTip;
        do {
          nextTip = Math.floor(Math.random() * farmingTips.length);
        } while (tipHistory.includes(nextTip) && tipHistory.length < farmingTips.length - 1);
        
        setCurrentTip(nextTip);
        setTipHistory(prev => [...prev.slice(-3), nextTip]);
      }
    }, 8000); // Change tip every 8 seconds

    return () => clearInterval(interval);
  }, [isVisible, tipHistory, farmingTips.length]);

  if (!isVisible) {
    return (
      <motion.div
        initial={{ scale: 0 }}
        animate={{ scale: 1 }}
        className="fixed bottom-6 right-6 z-50"
      >
        <Button
          onClick={() => setIsVisible(true)}
          className="rounded-full w-12 h-12 bg-green-600 hover:bg-green-700 shadow-lg"
        >
          <Lightbulb className="w-5 h-5" />
        </Button>
      </motion.div>
    );
  }

  const tip = farmingTips[currentTip];
  const tipText = tip.language[selectedLanguage as keyof typeof tip.language] || tip.text;

  return (
    <AnimatePresence>
      <motion.div
        initial={{ x: 400, opacity: 0 }}
        animate={{ x: 0, opacity: 1 }}
        exit={{ x: 400, opacity: 0 }}
        transition={{ type: "spring", stiffness: 200, damping: 25 }}
        className="fixed bottom-6 right-6 z-50 w-80"
      >
        <Card className="bg-gradient-to-br from-green-50 to-emerald-50 border-green-200 shadow-xl">
          <CardContent className="p-4">
            <div className="flex items-start justify-between mb-2">
              <div className="flex items-center space-x-2">
                <span className="text-2xl">{tip.icon}</span>
                <Badge variant="secondary" className="bg-green-100 text-green-700 text-xs">
                  <Lightbulb className="w-3 h-3 mr-1" />
                  Krishi Tip
                </Badge>
              </div>
              <div className="flex space-x-1">
                <Button
                  variant="ghost"
                  size="sm"
                  className="h-6 w-6 p-0 hover:bg-green-100"
                  onClick={() => {
                    const nextTip = (currentTip + 1) % farmingTips.length;
                    setCurrentTip(nextTip);
                  }}
                >
                  <ChevronRight className="w-3 h-3" />
                </Button>
                <Button
                  variant="ghost"
                  size="sm"
                  className="h-6 w-6 p-0 hover:bg-green-100"
                  onClick={() => setIsVisible(false)}
                >
                  <X className="w-3 h-3" />
                </Button>
              </div>
            </div>
            
            <div className="space-y-2">
              <Badge variant="outline" className="text-xs">
                {tip.category}
              </Badge>
              <p className="text-sm text-green-800 leading-relaxed">
                {tipText}
              </p>
            </div>

            <div className="mt-3 flex justify-between items-center">
              <span className="text-xs text-green-600">
                Tip {currentTip + 1} of {farmingTips.length}
              </span>
              <div className="flex space-x-1">
                {farmingTips.slice(0, 3).map((_, index) => (
                  <div
                    key={index}
                    className={`w-1.5 h-1.5 rounded-full ${
                      index === currentTip % 3 ? 'bg-green-500' : 'bg-green-200'
                    }`}
                  />
                ))}
              </div>
            </div>
          </CardContent>
        </Card>
      </motion.div>
    </AnimatePresence>
  );
}